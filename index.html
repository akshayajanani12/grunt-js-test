<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Grunt-js-test by benhutchins</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Grunt-js-test</h1>
        <p class="header">Grunt plugin to run client-side, mocha unit tests and generate code coverage reports</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/benhutchins/grunt-js-test/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/benhutchins/grunt-js-test/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/benhutchins/grunt-js-test">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/benhutchins">benhutchins</a></p>


      </header>
      <section>
        <h1>
<a name="grunt-javascript-test-runner--" class="anchor" href="#grunt-javascript-test-runner--"><span class="octicon octicon-link"></span></a>Grunt JavaScript Test Runner <a href="http://travis-ci.org/benhutchins/grunt-js-test"><img src="https://secure.travis-ci.org/benhutchins/grunt-js-test.png?branch=master" alt="Build Status"></a> <a href="https://gemnasium.com/benhutchins/grunt-js-test"><img src="https://gemnasium.com/benhutchins/grunt-js-test.png" alt="Dependency Status"></a>
</h1>

<p>grunt-js-test is a plugin for <a href="http://gruntjs.com/">Grunt</a> that is designed to run client-side unit tests using <a href="http://visionmedia.github.io/mocha/">Mocha</a>. You can easily run tests through the command line or a continuous integration suite using PhantomJS or you can pop up a simply server to run your tests in a browser using WebDriver, for development or testing of specific unit tests. grunt-js-test can also generate coverage reports using either <a href="https://tntim96.github.io/JSCover/">JSCover</a> or <a href="https://gotwarlost.github.io/istanbul/">Istanbul</a>.</p>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>This plugin requires Grunt '~0.4.0'</p>

<pre lang="shell"><code>npm install grunt-js-test --save-dev
</code></pre>

<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>

<div class="highlight highlight-js"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-js-test'</span><span class="p">);</span>
</pre></div>

<h3>
<a name="configure-your-grunt-task" class="anchor" href="#configure-your-grunt-task"><span class="octicon octicon-link"></span></a>Configure your Grunt task</h3>

<p>Open your <code>Gruntfile.js</code> and add your project's configuration as desired (all the options are described below). If you rely on all the defaults, you don't even need to provide anything.</p>

<p>A few simple example projects are available in the <a href="https://github.com/benhutchins/grunt-js-test/tree/master/examples">examples</a> directory.</p>

<h3>
<a name="write-your-tests" class="anchor" href="#write-your-tests"><span class="octicon octicon-link"></span></a>Write your tests</h3>

<p>Tests are loaded already wrapped up including <a href="http://visionmedia.github.io/mocha/">Mocha</a>, <a href="http://chaijs.com/">Chai</a> and <a href="http://sinonjs.org/">Sinon</a>. This means you are good to start writing tests immediately.</p>

<p>A simple example unit test using Mocha:</p>

<div class="highlight highlight-js"><pre><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">chai</span><span class="p">.</span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
      <span class="nx">chai</span><span class="p">.</span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>

<p>If you prefer to use another assert library other than Chai, you can optionally include it as a dependency (see <code>deps</code> option below).</p>

<h4>
<a name="loading-dependencies" class="anchor" href="#loading-dependencies"><span class="octicon octicon-link"></span></a>Loading dependencies</h4>

<p>grunt-js-test generates the test HTML page for you, making it quicker to write client-side tests. However, this means that you need a way to load the dependent JavaScript files. grunt-js-test supports <a href="http://requirejs.org/">require.js</a> projects natively, simply configure the options <code>requirejs</code> and <code>modulesRelativeTo</code> as needed. If you are not creating a require.js based project, then grunt-js-test implements support for <a href="http://blogs.msdn.com/b/webdev/archive/2007/11/06/jscript-intellisense-a-reference-for-the-reference-tag.aspx">JScript IntelliSense Reference Tags</a>. This allows you to easily load dependencies using a format of:</p>

<div class="highlight highlight-js"><pre><span class="c1">/// &lt;reference path="../relative/file.js" /&gt;</span>
</pre></div>

<p>There is an example project using these reference tags in our <a href="https://github.com/benhutchins/grunt-js-test/tree/master/examples">examples</a> directory as <a href="https://github.com/benhutchins/grunt-js-test/tree/master/examples/references">examples/references</a>.</p>

<h4>
<a name="adding-custom-html-to-test-pages" class="anchor" href="#adding-custom-html-to-test-pages"><span class="octicon octicon-link"></span></a>Adding custom HTML to test pages</h4>

<p>As grunt-js-test generates the test HTML pages for you, on occasion you need to add some HTML to the DOM of the page prior to your JavaScript running. There are two ways to do this, the easiest is to simply create a file named <code>.inject.html</code> alongside your test JavaScript file.</p>

<p>For example, if you had a test file called <code>something.unittests.js</code> you could have a similarly named file <code>something.unittests.inject.html</code>, the contents of which would be added to the body of the generated test page.</p>

<p>There is an example project using these reference tags in our <a href="https://github.com/benhutchins/grunt-js-test/tree/master/examples">examples</a> directory as <a href="https://github.com/benhutchins/grunt-js-test/tree/master/examples/injectHTML">examples/injectHTML</a>.</p>

<p>You can also reference <code>.html</code> files you wish to have injected using a <code>reference</code> tags similar to referencing JavaScript dependencies. The format of which is simply:</p>

<div class="highlight highlight-js"><pre><span class="c1">/// &lt;reference path="../relative/path/to/file/to/inject.html" /&gt;</span>
</pre></div>

<h2>
<a name="grunt-tasks" class="anchor" href="#grunt-tasks"><span class="octicon octicon-link"></span></a>Grunt tasks</h2>

<h3>
<a name="js-test" class="anchor" href="#js-test"><span class="octicon octicon-link"></span></a>js-test</h3>

<p><em>Run this task with the <code>grunt js-test</code> command.</em></p>

<p>Run all test files with PhantomJS. The minimal config would be:</p>

<div class="highlight highlight-js"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="s1">'js-test'</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">'default'</span><span class="o">:</span> <span class="p">{</span>
            <span class="s1">'options'</span><span class="o">:</span> <span class="p">{}</span>
        <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-js-test'</span><span class="p">);</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'test'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'js-test'</span><span class="p">]);</span>
</pre></div>

<h3>
<a name="js-test-server" class="anchor" href="#js-test-server"><span class="octicon octicon-link"></span></a>js-test-server</h3>

<p><em>Run this task with the <code>grunt js-test-server</code> command.</em></p>

<p>Start a web server on your local host to allow you to run the unit tests individually.</p>

<h2>
<a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>Options</h2>

<h3>
<a name="command-line-interface-options" class="anchor" href="#command-line-interface-options"><span class="octicon octicon-link"></span></a>Command Line Interface Options</h3>

<h4>
<a name="--coverage" class="anchor" href="#--coverage"><span class="octicon octicon-link"></span></a>--coverage</h4>

<p>Pass <code>--coverage</code> while running Grunt to turn on coverage with the default <code>coverageTool</code>. You can pass a value of a string to select the coverage tool you'd like to use, such as <code>--coverage=jscover</code>.</p>

<h4>
<a name="--identifiercommit-deadbeef" class="anchor" href="#--identifiercommit-deadbeef"><span class="octicon octicon-link"></span></a>--identifier="commit deadbeef"</h4>

<p>Pass <code>--identifier</code> with a value of a string you'd like to use as your job identifier. This will be the folder name used when saving your coverage reports to the directory configured with <code>coverageReportDirectory</code>. This is useful when using grunt-js-test through continuous integration and want to provide it either the job number or the commit id (or revision number if you're still on SVN).</p>

<p>By default a datetime in the format of <code>YYYY-MM-DD HHMMSS</code> will be used.</p>

<h3>
<a name="task-options" class="anchor" href="#task-options"><span class="octicon octicon-link"></span></a>Task Options</h3>

<p>All options of <code>js-test</code> are optional, if you specify nothing, it will run all JavaScript files anywhere in your project directory, recursively matching <code>*.unittests.js</code>.</p>

<h4>
<a name="root" class="anchor" href="#root"><span class="octicon octicon-link"></span></a>root</h4>

<p>Type: <code>String</code>
Default: <code>process.cwd()</code></p>

<p>Defines the root path to your project files. A static file web server is started on this path to allow your unit tests to load their dependencies.</p>

<h4>
<a name="pattern" class="anchor" href="#pattern"><span class="octicon octicon-link"></span></a>pattern</h4>

<p>Type: <code>String|Array&lt;String&gt;</code>
Default: <code>**/*.unittests.js</code></p>

<p>Glob search pattern to locate your unit tests. For more information on glob patterns please see <a href="https://github.com/isaacs/node-glob">node-glob</a>. This can optionally be an array of globs which will all be used to find a file matching any of the glob patterns.</p>

<h4>
<a name="include" class="anchor" href="#include"><span class="octicon octicon-link"></span></a>include</h4>

<p>Type: <code>Array&lt;String|RegExp&gt;</code>
Default: <code>[]</code></p>

<p>Array of simple string searches or regular expression used to whitelist tests. If a test does not match all of these filters it is ignored.</p>

<h4>
<a name="exclude" class="anchor" href="#exclude"><span class="octicon octicon-link"></span></a>exclude</h4>

<p>Type: <code>Array&lt;String|RegExp&gt;</code>
Default: <code>['/node_modules/']</code></p>

<p>Array of simple string searches or regular expressions used to blacklist tests. If a test matches one of these filters it is ignored.</p>

<h4>
<a name="baseuri" class="anchor" href="#baseuri"><span class="octicon octicon-link"></span></a>baseUri</h4>

<p>Type: <code>String</code>
Default: <code>/</code></p>

<p>Base path used when loading web assets.</p>

<h4>
<a name="deps" class="anchor" href="#deps"><span class="octicon octicon-link"></span></a>deps</h4>

<p>Type: <code>Array&lt;String&gt;</code>
Default: <code>[]</code></p>

<p>A list of paths to JavaScript files relative to your <code>baseUri</code> you want loaded as global dependencies for each test. You can also include external dependencies, such as <code>http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js</code>.</p>

<p>Dependencies can be injected on a per test file basis using <code>&lt;reference&gt;</code> tags. See <a href="https://github.com/benhutchins/grunt-js-test#loading-dependencies">loading dependencies</a>.</p>

<h4>
<a name="referencetags" class="anchor" href="#referencetags"><span class="octicon octicon-link"></span></a>referenceTags</h4>

<p>Type: <code>Boolean</code>
Default: <code>true</code></p>

<p>Look for <code>&lt;reference&gt;</code> tags within unit test files to automatically include additional dependencies. See <a href="https://github.com/benhutchins/grunt-js-test#loading-dependencies">loading dependencies</a>. Usually never hurts to leave it on.</p>

<h4>
<a name="hostname" class="anchor" href="#hostname"><span class="octicon octicon-link"></span></a>hostname</h4>

<p>Type: <code>String</code>
Default: <code>localhost</code></p>

<p>Hostname for web server when running the <code>js-test-server</code> grunt task.</p>

<h4>
<a name="port" class="anchor" href="#port"><span class="octicon octicon-link"></span></a>port</h4>

<p>Type: <code>Number</code>
Default: <code>8981</code></p>

<p>Port for web server when running the <code>js-test-server</code> grunt task.</p>

<h4>
<a name="staticport" class="anchor" href="#staticport"><span class="octicon octicon-link"></span></a>staticPort</h4>

<p>Type: <code>number</code>
Default: <code>8982</code></p>

<p>Port used for static web server that serves up your unit test dependency files. Should never have to change this unless something else uses this port.</p>

<h4>
<a name="coverageproxyport" class="anchor" href="#coverageproxyport"><span class="octicon octicon-link"></span></a>coverageProxyPort</h4>

<p>Type: <code>number</code>
Default: <code>8983</code></p>

<p>Port used for proxy web server that instruments your JavaScript files for code coverage reporting. Should never have to change this unless something else uses this port.</p>

<h4>
<a name="mocha" class="anchor" href="#mocha"><span class="octicon octicon-link"></span></a>mocha</h4>

<p>Type: <code>Object</code>
Default: <code>{}</code></p>

<p>Object of options to pass to the <a href="https://github.com/kmiyashiro/grunt-mocha/">grunt-mocha</a> task. Hopefully you never need to override anything here.</p>

<h4>
<a name="reporter" class="anchor" href="#reporter"><span class="octicon octicon-link"></span></a>reporter</h4>

<p>Type: <code>String</code>
Default: <code>Spec</code></p>

<p>Mocha reporter used by <code>js-test</code> when reporting to the console.</p>

<h4>
<a name="coverage" class="anchor" href="#coverage"><span class="octicon octicon-link"></span></a>coverage</h4>

<p>Type: <code>Boolean</code>
Default: <code>false</code></p>

<p>Should the test environment generate coverage reports? This can slow down running the tests, but will generate you code coverage reporting data.</p>

<h4>
<a name="coveragetool" class="anchor" href="#coveragetool"><span class="octicon octicon-link"></span></a>coverageTool</h4>

<p>Type: <code>String</code>
Default: <code>jscover</code></p>

<p>Choose between either <code>jscover</code> or <code>istanbul</code> for your coverage instrumentation and reporting service.</p>

<h4>
<a name="coveragereportdirectory" class="anchor" href="#coveragereportdirectory"><span class="octicon octicon-link"></span></a>coverageReportDirectory</h4>

<p>Type: <code>String</code>
Default: <code>process.cwd() + '/coverage'</code></p>

<p>Specify a directory where coverage report data should be saved.</p>

<h4>
<a name="filters" class="anchor" href="#filters"><span class="octicon octicon-link"></span></a>Filters</h4>

<p>These filters allow you to narrow down the tests you run via the <code>js-test</code> CLI. This is useful when updating a single test or when using grunt-js-test from a continuous integration service.</p>

<pre><code>file: null,                     // run only this file, by file name
re: null,                       // run tests with file names that match this regular expression
search: null,                   // run tests with file names that contain the string passed (case insensitive)
bail: false,                    // if true we'll stop running tests once we find a single failure
grep: false,                    // passed to mocha, runs a regex test on the test descriptions
log: false,                     // if true, will pass console.log data from phantomjs to node console for debugging
</code></pre>

<h4>
<a name="require" class="anchor" href="#require"><span class="octicon octicon-link"></span></a>require</h4>

<p>Type: <code>Boolean</code>
Default: <code>false</code></p>

<p>This identifies your project as being a requirejs based project, which means that we do not include your test file directly but instead allow <a href="http://requirejs.org/">require.js</a> to load it.</p>

<h4>
<a name="modulesrelativeto" class="anchor" href="#modulesrelativeto"><span class="octicon octicon-link"></span></a>modulesRelativeTo</h4>

<p>Type: <code>String</code>
Default: <code>null</code></p>

<p>This defines the path your modules should be relative to, if it's different than your project's <code>root</code> directory. Only applicable when your project is a <code>requirejs</code> based project.</p>

<h4>
<a name="injecthtml" class="anchor" href="#injecthtml"><span class="octicon octicon-link"></span></a>injectHTML</h4>

<p>Type: <code>String</code>
Default: <code>null</code></p>

<p>Optional raw HTML string that added to all of the test pages generated by grunt-js-test. You can load files using this command by using the <code>fs</code> module, example: <code>require('fs').readFileSync('tests/setup.html')</code>.</p>

<h4>
<a name="injectserver" class="anchor" href="#injectserver"><span class="octicon octicon-link"></span></a>injectServer</h4>

<p>Type: <code>String</code>
Default: <code>null</code></p>

<p>Optional web server address that provides HTML responses that should be injected into test pages. Similar to <code>injectHTML</code>. This can be used to inject rendered templates into your tests, if needed.</p>

<p>An example value would be: <code>http://localhost:3000/dev/render</code></p>

<p>A request will be made to the url you provide and will provide the test file with it's path relative from the <code>root</code> directory as a query string paramater <code>file</code>. Example: <code>?file=test/example.unittests.js</code></p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-49219744-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
